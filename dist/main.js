!function(){"use strict";class e{constructor(e,t,s){let{name:n,link:r}=e;this._name=n,this._link=r,this._cardSelector=t,this._handleCardClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListener(){this._element.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeletCard()})),console.log(this),this._cardImage.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_handleDeletCard(){this._element.remove()}_handleLikeIcon(){this._element.querySelector(".card__like-button").classList.toggle("card__like-button_active")}getView(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle=this._element.querySelector(".card__title"),this._cardTitle.textContent=this._name,this._setEventListener(),this._element}}class t{constructor(e,t){this._settings=e,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._settings.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._settings.inputErrorClass),t.textContent="",t.classList.remove(this._settings.errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_checkFormValidity=()=>this._inputElements.every((e=>e.validity.valid));toggleButtonState(){if(!this._checkFormValidity())return this._submitButton.classList.add(this._settings.inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._settings.inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputElements=Array.from(this._form.querySelectorAll(this._settings.inputSelector)),this._submitButton=this._form.querySelector(this._settings.submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){isFormValid.resetForm()}}class s{constructor(e){this._popupElement=document.querySelector(e),this._open=this.open.bind(this),this._close=this.close.bind(this),this._handleEscClose=this.handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}class n extends s{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=t}setEventListeners(){this._popupForm.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}open(){super.open()}close(){super.close(),this._popupForm.reset()}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}}const r=document.querySelector("#profile-edit-modal"),i=(r.querySelector(".modal__close"),r.querySelector(".modal__form")),o=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__info"),l=(a.querySelector(".profile__title"),a.querySelector(".profile__description"),document.querySelector("#profile-title-input")),c=r.querySelector("#profile-description-input"),d=document.querySelector(".profile__add-button"),u=document.querySelector("#new-card-modal"),m=(u.querySelector(".modal__close"),u.querySelector("#add-card-form")),_=u.querySelector("#add-card-modal-save-button"),h=(u.querySelector(".modal__input_type_title"),document.querySelector(".cards__list")),p=(document.querySelector("#card-template").content.firstElementChild,document.querySelector("#image-modal")),g=(document.querySelector(".modal__image"),p.querySelector(".modal__close"),document.querySelector(".modal__image-caption")),y=(document.querySelectorAll(".modal"),new class{constructor(e,t){this._name=document.querySelector(e),this._title=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,title:this._title.textContent}}setUserInfo(e){this._name.textContent=e.name,this._title.textContent=e.title}}(".profile__title",".profile__description")),S=new n("#new-card-modal",(e=>{const t=L({name:e.title,link:e.url});w.addItem(t),S.close(),k.toggleButtonState()}));S.setEventListeners();const v=new n("#profile-edit-modal",(e=>{y.setUserInfo(e),v.close()}));function E(e,t){previewImageElement.setAttribute("src",t),previewImageElement.setAttribute("alt",e),openModal(previewImageModal),g.textContent=data.name}v.setEventListeners(),o.addEventListener("click",(function(){const e=y.getUserInfo();l.value=e.name,c.value=e.title,v.open()})),d.addEventListener("click",(()=>{S.open()})),_.addEventListener("submit",(function(e){e.preventDefault();const t=L({name:e.target.title.value,link:e.target.link.value});h.prepend(t),closeModal(u),e.target.reset(),k.toggleButtonState()}));const f={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};function L(t){return new e(t,"#card-template",E).getView()}const q=new t(f,i),k=new t(f,m);q.enableValidation(),k.enableValidation();const w=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}rendererItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=L(e);w.addItem(t)}},".cards__list");w.rendererItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSx5R0FHUSxDQUNkRCxLQUFNLGlCQUNOQyxLQUFNLDRHQUdRLENBQ2RELEtBQU0sVUFDTkMsS0FBTSxxR0FHUSxDQUNkRCxLQUFNLHdCQUNOQyxLQUFNLHFHQUdRLENBQ2RELEtBQU0saUJBQ05DLEtBQU0sbUdDMkZKc0ksU0FBV0osSUFDVCxNQUFNVyxFQUFjMUIsRUFBV2UsR0FDL0JiLEVBQVFDLFFBQVF1QixFQUFZLEdBR2hDLGdCQUVGeEIsRUFBUXFCLGUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3NjcmlwdHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3NjcmlwdHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9zY3JpcHRzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcbiAgICAvLyAuY2FyZF9fbGlrZS1idXR0b25cbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XG4gICAgICB9KTtcblxuICAgIC8vLmNhcmRfX2RlbGV0ZS1idXR0b25cbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRDYXJkKCk7XG4gICAgICB9KTtcbiAgICBjb25zb2xlLmxvZyh0aGlzKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVEZWxldENhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgLy9nZXQgdGhlIGNhcmQgdmlld1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICAvLyBzZXQgdGhlIGFsdCB0ZXh0XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG5cbiAgICAvLyBzZWxlY3QgdGhlIGNhcmQgdGl0bGUgZWxlbWVudFxuICAgIC8vIHNldCB0ZXh0Y29udGVudCBvZiBjYXJkIHRpdGxlIGVsZW1lbnRcblxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgLy9zZXQgZXZlbnQgbGlzdGVuZXJzXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcigpO1xuICAgIC8vcmV0dXJuIHRoZSBjYXJkXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICB9XG5cbiAgX2NoZWNrRm9ybVZhbGlkaXR5ID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQpO1xuICB9O1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGNvbnN0IGlzRm9ybVZhbGlkID0gdGhpcy5fY2hlY2tGb3JtVmFsaWRpdHkoKTtcbiAgICBpZiAoIWlzRm9ybVZhbGlkKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG5cbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIGlzRm9ybVZhbGlkLnJlc2V0Rm9ybSgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX29wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcbiAgICB0aGlzLl9jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuaGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBoYW5kbGVFc2NDbG9zZShlKSB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikgfHxcbiAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXREYXRhID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dERhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXREYXRhO1xuICB9XG59XG4iLCJjb25zdCBvYmplY3QxID0ge1xuICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG59O1xuXG5jb25zdCBvYmplY3QyID0ge1xuICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbn07XG5cbmNvbnN0IG9iamVjdDMgPSB7XG4gIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxufTtcblxuY29uc3Qgb2JqZWN0NCA9IHtcbiAgbmFtZTogXCJMYXRlbWFyXCIsXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxufTtcblxuY29uc3Qgb2JqZWN0NSA9IHtcbiAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG59O1xuXG5jb25zdCBvYmplY3Q2ID0ge1xuICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAgb2JqZWN0MSxcbiAgb2JqZWN0MixcbiAgb2JqZWN0MyxcbiAgb2JqZWN0NCxcbiAgb2JqZWN0NSxcbiAgb2JqZWN0Nixcbl07XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTW9kYWxDbG9zZUJ1dHRvbiA9XG4gIHByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTW9kYWxGb3JtID0gcHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW5mb1wiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgPSBwcm9maWxlRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBkZXNjcmlwdGlvbkpvYiA9IHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uRWRpdCA9IHByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5cbmV4cG9ydCBjb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LWNhcmQtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZENsb3NlQnV0dG9uID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkU3VibWl0ID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI2FkZC1jYXJkLW1vZGFsLXNhdmUtYnV0dG9uXCJcbik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZFRpdGxlID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX3RpdGxlXCJcbik7XG5cbmV4cG9ydCBjb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG5cbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZUNsb3NlID1cbiAgcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiXG4pO1xuXG5leHBvcnQgY29uc3QgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuLy8gaW1wb3J0IHsgaW5pdGlhbENhcmRzIH0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuXG5pbXBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIHByb2ZpbGVNb2RhbCxcbiAgcHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24sXG4gIHByb2ZpbGVNb2RhbEZvcm0sXG4gIGVkaXRQcm9maWxlQnV0dG9uLFxuICBwcm9maWxlRm9ybUVsZW1lbnQsXG4gIHByb2ZpbGVUaXRsZSxcbiAgcHJvZmlsZVRpdGxlRWRpdCxcbiAgcHJvZmlsZURlc2NyaXB0aW9uRWRpdCxcbiAgYWRkQ2FyZEJ1dHRvbixcbiAgYWRkQ2FyZE1vZGFsLFxuICBhZGRDYXJkQ2xvc2VCdXR0b24sXG4gIGFkZENhcmRTdWJtaXQsXG4gIGFkZENhcmRUaXRsZSxcbiAgY2FyZExpc3QsXG4gIGNhcmRUZW1wbGF0ZSxcbiAgcHJldmlld0ltYWdlQ2xvc2UsXG4gIHByZXZpZXdJbWFnZVRpdGxlLFxuICBtb2RhbHMsXG4gIGRlc2NyaXB0aW9uSm9iLFxuICBhZGRDYXJkRm9ybSxcbn0gZnJvbSBcIi4uL3V0aWxzL0NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhcIi5wcm9maWxlX190aXRsZVwiLCBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcblxuY29uc3QgbmV3Q2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjbmV3LWNhcmQtbW9kYWxcIiwgKGRhdGEpID0+IHtcbiAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoe1xuICAgIG5hbWU6IGRhdGEudGl0bGUsXG4gICAgbGluazogZGF0YS51cmwsXG4gIH0pO1xuICBzZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XG4gIG5ld0NhcmRNb2RhbC5jbG9zZSgpO1xuXG4gIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbn0pO1xubmV3Q2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jb25zdCBuZXdQcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWVkaXQtbW9kYWxcIiwgKGRhdGEpID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gIG5ld1Byb2ZpbGVNb2RhbC5jbG9zZSgpO1xufSk7XG5uZXdQcm9maWxlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZpbGxQcm9maWxlRm9ybSk7XG5cbmZ1bmN0aW9uIGZpbGxQcm9maWxlRm9ybSgpIHtcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlVGl0bGVFZGl0LnZhbHVlID0gdXNlckRhdGEubmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uRWRpdC52YWx1ZSA9IHVzZXJEYXRhLnRpdGxlO1xuICBuZXdQcm9maWxlTW9kYWwub3BlbigpO1xufVxuXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG5ld0NhcmRNb2RhbC5vcGVuKCk7XG59KTtcblxuZnVuY3Rpb24gY2xvc2VCeUVzY2FwZShldnQpIHtcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjb25zdCBvcGVuZWRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfb3BlbmVkXCIpO1xuICAgIGNsb3NlTW9kYWwob3BlbmVkTW9kYWwpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2sobmFtZSwgbGluaykge1xuICBwcmV2aWV3SW1hZ2VFbGVtZW50LnNldEF0dHJpYnV0ZShcInNyY1wiLCBsaW5rKTtcbiAgcHJldmlld0ltYWdlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbmFtZSk7XG4gIG9wZW5Nb2RhbChwcmV2aWV3SW1hZ2VNb2RhbCk7XG4gIHByZXZpZXdJbWFnZVRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xufVxuXG5hZGRDYXJkU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCB0aXRsZSA9IGUudGFyZ2V0LnRpdGxlLnZhbHVlO1xuICBjb25zdCBpbWFnZSA9IGUudGFyZ2V0LmxpbmsudmFsdWU7XG4gIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKHtcbiAgICBuYW1lOiB0aXRsZSxcbiAgICBsaW5rOiBpbWFnZSxcbiAgfSk7XG4gIGNhcmRMaXN0LnByZXBlbmQoY2FyZCk7XG4gIGNsb3NlTW9kYWwoYWRkQ2FyZE1vZGFsKTtcbiAgZS50YXJnZXQucmVzZXQoKTtcbiAgYWRkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xufSk7XG5cbi8vIGluaXRpYWxDYXJkcy5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhKSB7XG4vLyAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChkYXRhKTtcbi8vICAgY2FyZExpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XG4vLyB9KTtcblxuY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XG59XG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlTW9kYWxGb3JtKTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGFkZENhcmRGb3JtKTtcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gICAgICBzZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5zZWN0aW9uLnJlbmRlcmVySXRlbXMoKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl90aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgaW5mbyA9IHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICB0aXRsZTogdGhpcy5fdGl0bGUudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgICByZXR1cm4gaW5mbztcbiAgICAvL3JldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB0aGUgdXNlci5cbiAgfVxuXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gZGF0YS50aXRsZTtcbiAgICAvL3Rha3NlcyBhIG5ldyB1c2VyIGRhdGEgYW5kIGFkZHMgaXQgb24gdGhlIHBhZ2UuXG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlcmVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJuYW1lIiwibGluayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXIiLCJfZWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRDYXJkIiwiY29uc29sZSIsImxvZyIsIl9jYXJkSW1hZ2UiLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJnZXRWaWV3Iiwic3JjIiwiYWx0IiwiX2NhcmRUaXRsZSIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfc2V0dGluZ3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckNsYXNzIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfY2hlY2tGb3JtVmFsaWRpdHkiLCJfaW5wdXRFbGVtZW50cyIsImV2ZXJ5IiwiaW5wdXQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9zdWJtaXRCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiZm9yRWFjaCIsImUiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJpc0Zvcm1WYWxpZCIsInJlc2V0Rm9ybSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfb3BlbiIsIm9wZW4iLCJiaW5kIiwiX2Nsb3NlIiwiY2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJoYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaW5wdXRMaXN0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsImlucHV0RGF0YSIsInZhbHVlIiwicHJvZmlsZU1vZGFsIiwicHJvZmlsZU1vZGFsRm9ybSIsImVkaXRQcm9maWxlQnV0dG9uIiwicHJvZmlsZUZvcm1FbGVtZW50IiwicHJvZmlsZVRpdGxlRWRpdCIsInByb2ZpbGVEZXNjcmlwdGlvbkVkaXQiLCJhZGRDYXJkQnV0dG9uIiwiYWRkQ2FyZE1vZGFsIiwiYWRkQ2FyZEZvcm0iLCJhZGRDYXJkU3VibWl0IiwiY2FyZExpc3QiLCJwcmV2aWV3SW1hZ2VNb2RhbCIsImZpcnN0RWxlbWVudENoaWxkIiwicHJldmlld0ltYWdlVGl0bGUiLCJ1c2VySW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl90aXRsZSIsImdldFVzZXJJbmZvIiwidGl0bGUiLCJzZXRVc2VySW5mbyIsImRhdGEiLCJuZXdDYXJkTW9kYWwiLCJjYXJkIiwiY3JlYXRlQ2FyZCIsInVybCIsInNlY3Rpb24iLCJhZGRJdGVtIiwiYWRkRm9ybVZhbGlkYXRvciIsIm5ld1Byb2ZpbGVNb2RhbCIsImhhbmRsZUltYWdlQ2xpY2siLCJwcmV2aWV3SW1hZ2VFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwib3Blbk1vZGFsIiwidXNlckRhdGEiLCJwcmVwZW5kIiwiY2xvc2VNb2RhbCIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsImNhcmREYXRhIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVyZXJJdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwiY2FyZEVsZW1lbnQiXSwic291cmNlUm9vdCI6IiJ9